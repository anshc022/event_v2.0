<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for {{ event.title }}</title>
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Google Fonts for DM Serif Display -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'DM Serif Display', serif;
            background-color: var(--bg-color, #fff6f6);
            color: var(--text-color, #eaeaea);
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            padding: 0;
        }

    .container {
        width: 80%;
        margin: 0 auto;
        padding: 20px;
        background: rgba(108, 19, 126, 0.18); /* Semi-transparent background */
        backdrop-filter: blur(10px); /* Blurring effect */
        box-shadow: 0 0 15px rgba(143, 7, 134, 0.2), 0 0 30px rgba(108, 19, 126, 0.6); /* Added glow effect */
        margin-top: 20px;
        border-radius: 12px; /* Slightly rounded corners */
    }


        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--heading-color, #c290ef);
        }

        .input-field label {
            color: var(--label-color, #ffb7b7);
        }

        .input-field input {
            color: var(--input-text-color, #ffffff); /* Ensure text color is visible */
            background-color: var(--input-bg-color, #fff); /* Background color for inputs */
        }

        .input-field input:focus + label {
            color: var(--label-focus-color, #000);
        }

        .input-field input:focus {
            border-bottom: 1px solid var(--input-focus-border-color, #000);
            box-shadow: 0 1px 0 0 var(--input-focus-shadow-color, #000);
        }

        .input-field input::placeholder {
            color: var(--placeholder-color, #999); /* Placeholder text color */
        }

        .btn {
            background-color: var(--button-bg-color, #007bff);
            color: var(--button-text-color, #fff);
            border-radius: 8px;
        }

        .btn:hover {
            background-color: var(--button-hover-bg-color, #0056b3);
        }

        footer {
            background-color: #212121;
            color: white;
            padding: 20px 0;
            text-align: center;
        }

        footer .footer-text {
            margin: 0;
            font-size: 1rem;
        }

        /* Modal Styles */
        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .modal.open {
            opacity: 1;
            transform: translateY(0);
        }

        .modal.closed {
            opacity: 0;
            transform: translateY(-50px);
        }

        /* Dark mode specific styles */
/* Dark mode specific styles */
body.dark-mode {
    --bg-color: #1a202c;
    --text-color: #cbd5e0;
    --container-bg-color: #2d3748;
    --heading-color: #cbd5e0;
    --label-color: #cbd5e0;
    --label-focus-color: #cbd5e0;
    --input-text-color: #cbd5e0; /* Text color for inputs in dark mode */
    --input-bg-color: #2d3748; /* Background color for inputs in dark mode */
    --input-focus-border-color: #cbd5e0;
    --input-focus-shadow-color: #cbd5e0;
    --button-bg-color: #4a5568;
    --button-text-color: #cbd5e0;
    --button-hover-bg-color: #2d3748;
    --nav-bg-color: #2d3748;
    --nav-text-color: #cbd5e0;
    --placeholder-color: #888; /* Placeholder text color in dark mode */
    --modal-bg-color: #2d3748; /* Background color for the modal in dark mode */
    --modal-text-color: #cbd5e0; /* Text color for the modal in dark mode */
    --modal-border-color: #cbd5e0; /* Border color for modal elements */
}

.modal {
    background-color: var(--modal-bg-color, #fff); /* Default background color */
    color: var(--modal-text-color, #000); /* Default text color */
}

.modal-content {
    color: var(--modal-text-color, #000); /* Default text color */
}

.modal-footer {
    background-color: var(--modal-bg-color, #fff); /* Default background color */
    color: var(--modal-text-color, #000); /* Default text color */
}

.modal-close {
    color: var(--modal-border-color, #000); /* Default close button color */
}

.btn {
    background-color: var(--button-bg-color, #007bff);
    color: var(--button-text-color, #fff);
    border-radius: 8px;
}

.btn:hover {
    background-color: var(--button-hover-bg-color, #0056b3);
}


        /* Circles Background */
        .area {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1; /* Ensure circles are behind content */
        }

        .circles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        /* Circles Background with Glow Effect */
        .circles li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: rgba(244, 244, 244, 0.3);
            animation: animate 25s linear infinite;
            bottom: -150px;
            border-radius: 50%; /* Ensure circles are round */
            box-shadow: 0 0 15px rgba(25, 30, 134, 0.6); /* Glow effect */
        }

        .circles li:nth-child(1) {
            left: 25%;
            width: 80px;
            height: 80px;
            animation-delay: 0s;
            box-shadow: 0 0 30px rgba(12, 26, 86, 0.6); /* Larger glow for bigger circles */
        }

        .circles li:nth-child(2) {
            left: 10%;
            width: 20px;
            height: 20px;
            animation-delay: 2s;
            animation-duration: 12s;
            box-shadow: 0 0 15px rgba(89, 40, 194, 0.6); /* Glow effect */
        }

        .circles li:nth-child(3) {
            left: 70%;
            width: 20px;
            height: 20px;
            animation-delay: 4s;
            box-shadow: 0 0 15px rgba(0, 8, 255, 0.6); /* Glow effect */
        }

        .circles li:nth-child(4) {
            left: 40%;
            width: 60px;
            height: 60px;
            animation-delay: 0s;
            animation-duration: 18s;
            box-shadow: 0 0 25px rgba(30, 0, 255, 0.6); /* Slightly larger glow for medium circles */
        }

        .circles li:nth-child(5) {
            left: 65%;
            width: 20px;
            height: 20px;
            animation-delay: 0s;
            box-shadow: 0 0 15px rgba(0, 21, 255, 0.6); /* Glow effect */
        }

        .circles li:nth-child(6) {
            left: 75%;
            width: 110px;
            height: 110px;
            animation-delay: 3s;
            box-shadow: 0 0 30px rgba(230, 0, 255, 0.6); /* Larger glow for bigger circles */
        }

        .circles li:nth-child(7) {
            left: 35%;
            width: 150px;
            height: 150px;
            animation-delay: 7s;
            box-shadow: 0 0 40px rgba(212, 0, 255, 0.6); /* Larger glow for biggest circles */
        }

        .circles li:nth-child(8) {
            left: 50%;
            width: 25px;
            height: 25px;
            animation-delay: 15s;
            animation-duration: 45s;
            box-shadow: 0 0 15px rgba(200, 0, 255, 0.6); /* Glow effect */
        }

        .circles li:nth-child(9) {
            left: 20%;
            width: 15px;
            height: 15px;
            animation-delay: 2s;
            animation-duration: 35s;
            box-shadow: 0 0 15px rgba(255, 0, 111, 0.6); /* Glow effect */
        }

        .circles li:nth-child(10) {
            left: 85%;
            width: 150px;
            height: 150px;
            animation-delay: 0s;
            animation-duration: 11s;
            box-shadow: 0 0 40px rgba(255, 0, 55, 0.6); /* Larger glow for biggest circles */
        }

        @keyframes animate {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                border-radius: 0;
            }
            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
                border-radius: 50%;
            }
        }

        html {
            scroll-behavior: smooth;
        }

        /* Bottom Navigation Bar */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--nav-bg-color, #21100d);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0;
            z-index: 1000;
        }

        .bottom-nav a {
            color: var(--nav-text-color, #fff);
            text-align: center;
            font-size: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .bottom-nav a i {
            font-size: 2rem;
        }

        .bottom-nav a span {
            font-size: 0.75rem;
        }

        .bottom-nav a:hover {
            color: var(--button-hover-bg-color, #0056b3);
        }
    </style>
</head>
<body>
    <div class="area">
        <ul class="circles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

    <div class="container">
        <h1>Registration for {{ event.title }}</h1>

        <!-- Error and Success Messages -->
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert {{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="col s12">
            {% csrf_token %}
            {{ form.non_field_errors }}
        
            {% for field in form %}
                <div class="input-field">
                    <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <span class="helper-text" data-error="{{ field.errors|join:', ' }}"></span>
                    {% endif %}
                </div>
            {% endfor %}
        
            <button type="submit" class="btn waves-effect waves-light">Register
                <i class="material-icons right">send</i>
            </button>
        </form>
    
        <!-- WhatsApp Group Link Section -->
        {% if registration_complete %}
        <div id="popup" class="modal">
            <div class="modal-content">
                <h4>Congratulations!</h4>
                <p>Your registration for {{ event.title }} is successful.</p>
                <p>Join our WhatsApp group for further updates:</p>
                <a href="{{ event.whatsapp_group_link }}" class="btn waves-effect waves-light" target="_blank">Join WhatsApp Group</a>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>
        
        {% endif %}
    </div>
    <!-- Bottom Navigation Bar -->

    <!-- Materialize JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Dark Mode Toggle JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Materialize components
            M.Sidenav.init(document.querySelectorAll('.sidenav'));
            M.Modal.init(document.querySelectorAll('.modal'), { dismissible: false });

            // Open the modal on page load if registration_complete is true
            if ("{{ registration_complete|lower }}" === "true") {
                M.Modal.getInstance(document.getElementById('popup')).open();
            }

            // Dark Mode Toggle Initialization
            const darkModeSwitch = document.querySelector('#dark-mode-switch');
            
            // Check for previously set dark mode preference
            const darkModePreference = JSON.parse(localStorage.getItem('darkMode'));
            if (darkModePreference) { // Use dark mode if preference is true
                document.body.classList.add('dark-mode');
                darkModeSwitch.checked = true;
            }

            // Dark Mode Toggle
            darkModeSwitch.addEventListener('change', () => {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
            });
        });
    </script>
</body>
</html>
